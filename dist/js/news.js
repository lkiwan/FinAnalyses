const API_BASE="http://localhost:8000/api";function createNewsCard(e){return`\n        <div class="bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow duration-200">\n            <a href="${e.url}" target="_blank" rel="noopener noreferrer" class="block">\n                <h3 class="font-semibold text-gray-800 hover:text-blue-600">${e.title}</h3>\n                <p class="text-sm text-gray-600 mt-2">${e.snippet}</p>\n            </a>\n        </div>\n    `}async function fetchAndDisplayNews(e,t){const r=document.getElementById(t);if(!r)return;const n=r.querySelector(".loader");try{const t=await fetch(`${API_BASE}/news?source=${e}`);if(!t.ok)throw new Error(`Erreur du serveur (HTTP ${t.status})`);const a=await t.json();n&&n.remove(),a.articles&&a.articles.length>0?a.articles.forEach(e=>{r.innerHTML+=createNewsCard(e)}):r.innerHTML+='<p class="text-sm text-gray-500">Aucune actualité trouvée pour cette source.</p>'}catch(t){console.error(`Erreur lors de la récupération des actualités pour ${e}:`,t),n&&(n.textContent="Impossible de charger. Vérifiez que le serveur API est lancé et qu'il n'y a pas d'erreur CORS (voir console F12).",n.classList.add("text-red-600"))}}document.addEventListener("DOMContentLoaded",()=>{[{name:"moneywise",id:"news-moneywise"},{name:"gobankingrates",id:"news-gobankingrates"},{name:"morningstar",id:"news-morningstar"},{name:"barchart",id:"news-barchart"}].forEach(e=>{fetchAndDisplayNews(e.name,e.id)})});